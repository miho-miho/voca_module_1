<!doctype html><!-- vmod_detail_table : 分類語彙表検索の詳細ページ -->
<html lang="jp">
<head>
  <%- include('../partials/v_head') %>
</head>
  <body>
    <header><%- include('../partials/header') %></header>
    <main class="container main">
      <div class="row">
        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
          <ol class="breadcrumb bg-secondary top-bread">
            <li class="breadcrumb-item"><a href="/voca/" class="first-item">東外大言語モジュール top(Node版)</a></li>
            <li class="breadcrumb-item active"><a href="/voca/<%- lg %>/v/"><%= lang_jp %></a></li>
            <li class="breadcrumb-item active">語彙モジュール</li>
          </ol>
        </nav>
          <%- include('../partials/v_sidebar') %>
        <div class="col main-body">
          <div class="card">
            <div class="card-header">
              <h4 class="card-title">語彙詳細</h4>
            </div>
          </div>
          <div class="row">
            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
              <ol class="breadcrumb bg-secondary">
                <li class="breadcrumb-item active" aria-current="page"><a href="" class="first-item" id="linkToPage"></a></li>
                <li class="breadcrumb-item active" aria-current="page">詳細</li>
                <li class="breadcrumb-item active"><a href="" class="linkToBefore" id="linkToBeforeText"></a></li>
                <li class="breadcrumb-item active"><strong class="targetWord"></strong></li>
              </ol>
            </nav>
            <div class="">
              <p class="float-end"><span id="now_item">今</span>/<span id="all_items"></span>ページ</p>
            </div>
            <div class="container">
              <button type="button" name="button" class="btn btn-outline-primary col-auto btn_previous">　前　</button>
              <button type="button" name="button" class="btn btn-outline-primary col-auto btn_next">　次　</button>
            </div>
            <div class="link-explanation row align-items-center">
              <span class="col-auto col-auto"><span class="linkicon badge bg-info text-dark">文</span> 文法モジュールへリンク</span>
              <span class="col-auto col-auto"><span class="linkicon badge bg-success">会</span> 会話モジュールへリンク</span>
              <span class="col-auto col-auto"><span class="linkicon badge bg-warning text-dark">発</span> 発音モジュールへリンク</span>
            </div>
            <div class="result-area container">
              <div class="row align-items-center justify-content-center">
                <h2 class="targetWord col-auto"></h2>
                <div class="col-auto targetWordAudio"></div>
              </div>
              <hr class="featurette-divider">
              <div class="result-card-area">
              </div>
              <div class="container text-center button-area">
                <button type="button" name="button" class="btn btn-outline-primary col-auto float-start btn_previous">　前　</button>
                <a href="" class="linkToBefore">戻る</a>
                <button type="button" name="button" class="btn btn-outline-primary col-auto float-end btn_next">　次　</button>
              </div>
            </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <div class="push"></div>
    <footer><%- include('../partials/footer') %></footer>
    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="../../js/make_detail_deco.js"></script>
    <script>
    var targetArray = <%- JSON.stringify(targetObj) %>;
    var targetIndex = "";
    var targetItems;
    //基礎語彙・分類表用（検索の時は””）
    var tag = "<%= tag %>";
    var category = "<%= category %>";
    //検索用（その他の時は””）
    var targetChar = "<%= targetChar %>";
    var targetSt = "<%= targetSt %>";
    //表示元に応じてパンくずリストのテキストとリンクを設定
    if (tag === "") {
      $("#linkToPage").text("検索");
      $("#linkToPage").attr("href", `./v_search`);
      $(".targetWord").text("<%= targetWord %>")
      if (targetChar.includes("~")) {
        var char = targetChar.replace(/~/g, "")
        $(".linkToBefore").attr("href", `./v_search_list-str=${char}&st=${targetSt}`)
        $("#linkToBeforeText").text(`単語検索：${targetChar}`);
      } else {
        $(".linkToBefore").attr("href", `./v_search_list-char=${targetChar}`)
        $("#linkToBeforeText").text(`文字検索：${targetChar}`);
      }
    } else {
      $(".targetWord").text("<%= targetWord %>")
      if (tag.includes(".")) {
        $("#linkToPage").text("基礎語彙分類表");
        $("#linkToPage").attr("href", "./table");
        $(".linkToBefore").attr("href", `./t_search_list=${tag}`)
        $("#linkToBeforeText").text(`${category}`);
      } else {
        $("#linkToPage").text("基礎語彙の学習");
        $("#linkToPage").attr("href", "./catego");
        $(".linkToBefore").attr("href", `./catego#${category}`)
        $("#linkToBeforeText").text(`${category}`);
      } 
    }
    $("#all_items").text(targetArray.length)
    for (var i = 0; i < targetArray.length; i++) {
      if (targetArray[i].midasi === "<%= targetWord %>") {
        targetIndex = i
      }
    }
    showResult("<%= lg %>", targetIndex, "<%= targetWord %>")
      $(".btn_previous").click(function(){
        $(".btn_next").prop("disabled", false);
        targetIndex = targetIndex-1
        $(".targetWordAudio").empty();
        if (targetIndex >= 0) {
          $(".result-card-area").empty()
          showResult("<%= lg %>", targetIndex, "<%= targetWord %>");
        }
      });
      $(".btn_next").click(function(){
        $(".btn_previous").prop("disabled", false);
          targetIndex = targetIndex+1
          $(".targetWordAudio").empty();
          if (targetIndex < targetArray.length) {
            $(".result-card-area").empty()
            showResult("<%= lg %>", targetIndex, "<%= targetWord %>");
          }
      });
      let windowWidth = $(window).width()
      sideberSwitch(windowWidth);
      playAudio();
    </script>
    <style>
      .token {
        color: red;
        font-weight: bolder;
      }
      .btn_previous:disabled, .btn_next:disabled{
        background-color: gray;
        color: white;
        border: black;
      }
      .result-card {
        margin-top: 0px;
      }
      .button-area {
        padding-bottom: 40px;
      }
      .link-explanation{
        padding-top: 10px;
        padding-bottom: 10px;
      }
      .linkicon {
        padding-top: 8px;
        padding-bottom: 8px;
      }
    </style>
  </body>
</html>
